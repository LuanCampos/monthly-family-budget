<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Or√ßamento Familiar</title>
    <script>
      // GitHub Pages SPA redirect script
      // This script redirects all 404s back to index.html with the original path/hash preserved
      var l = window.location;

      // Detect if the site is served from the GitHub Pages repo path or a custom domain/root
      var repoBase = 'monthly-family-budget';
      var pathSegments = l.pathname.split('/').filter(Boolean);
      var hasRepoBase = pathSegments[0] === repoBase;
      var pathSegmentsToKeep = hasRepoBase ? 1 : 0;

      var redirectPath = l.pathname.split('/').slice(0, 1 + pathSegmentsToKeep).join('/') + '/?';
      
      // Preserve the original path after the base
      var remainingPath = l.pathname.split('/').slice(1 + pathSegmentsToKeep).join('/').replace(/&/g, '~and~');
      if (remainingPath) {
        redirectPath += 'p=' + remainingPath + '&';
      }
      
      // Preserve query string
      if (l.search) {
        redirectPath += 'q=' + l.search.slice(1).replace(/&/g, '~and~') + '&';
      }
      
      // Preserve hash (important for Supabase auth tokens)
      redirectPath += l.hash;
      
      l.replace(redirectPath);
    </script>
  </head>
  <body>
  </body>
</html>
